(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(5805)}])},5805:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return I}});var n=i(5893),o=i(8527),l=i(7294),s=i(1163),r=i(1014);function d(e){return(0,n.jsxs)(o.kC,{position:"absolute",top:"3vh",left:"1vw",zIndex:3,display:"inline",textAlign:"center",children:[(0,n.jsx)(o.xv,{fontSize:"sm",children:"\u5730\u5716"}),(0,n.jsx)(r.r,{marginY:"1.5vh",transform:"rotate(90deg)",isChecked:"PROFILE"===e.activeMode,size:"lg",value:e.activeMode,colorScheme:"gray",onChange:function(){"PROFILE"===e.activeMode?e.setActiveMode("MAP"):e.setActiveMode("PROFILE")}}),(0,n.jsx)(o.xv,{fontSize:"sm",children:"\u8def\u7dda"})]})}var c=i(6850),u=i(2546),a=i(6523),h=(i(2821),i(4651)),x=i(7694);function g(e){var t=e.group,i=(0,s.useRouter)(),l="/profilelist/"+t.toString();return(0,n.jsx)(o.xu,{role:"group",alignSelf:"flex-end",zIndex:-t-1,h:"70vh",w:"20vw",bgGradient:"linear(to-r, black, #343434)",borderTopEndRadius:"150px",textAlign:"center",alignItems:"center",position:"absolute",bottom:"0",left:"2",_hover:{h:"75vh",cursor:"pointer"},onClick:function(){i.push({pathname:l,query:i.query})},children:(0,n.jsxs)(o.xu,{marginX:"auto",bg:"white",height:"13vw",width:"13vw",borderRadius:"full",marginTop:"7vh",_groupHover:{bg:"yellow.200"},children:[(0,n.jsx)(h.Ee,{src:x.cW[t],margin:"auto",boxSize:"100%",objectFit:"contain",borderRadius:"full"})," "]})})}function p(){return(0,n.jsx)(o.kC,{h:"100vh",backgroundImage:"/P4_Profile/SlidingKeyVisual.svg",bgSize:"cover",children:(0,n.jsx)(o.kC,{zIndex:1,h:"80vh",maxW:"80vw",marginLeft:"20vw",alignSelf:"flex-end",children:(0,n.jsx)(u.tq,{modules:[a.W_,a.tl],spaceBetween:0,slidesPerView:4,slidesPerGroup:3,navigation:!0,onSlideChange:function(){return console.log("slide change")},onSwiper:function(e){return console.log(e)},children:x.uc.map((function(e,t){return(0,n.jsx)(u.o5,{style:{paddingLeft:0,paddingRight:0,marginRight:0,marginTop:0,marginBottom:0,paddingBottom:0,paddingTop:0,marginLeft:"-1vw",width:"20vw",height:"80vh",maxHeight:"80vh",alignSelf:"flex-end",verticalAlign:"top",position:"relative",zIndex:-t-1},children:(0,n.jsx)(g,{group:t})},t)}))})})})}var v=i(7568),f=i(7582),j=i(7054),b=i(4017),m=i(6723),w=i(5940),y=i(8786);function k(e){var t,i,l;null===(t=e.journeys)||void 0===t||t.map((function(e,t){return{value:e.id,label:e.title,id:e.id}}));return(0,n.jsxs)(o.kC,{zIndex:2,position:"absolute",bottom:0,left:"22%",width:"12%",display:"inline",height:"17vh",children:[(0,n.jsx)(o.xu,{textAlign:"center",marginBottom:"1.5vh",children:(0,n.jsxs)(o.xv,{fontWeight:"bold",children:[(0,n.jsx)(y.X,{size:"2vw"}),"\u6309\u9019\u88e1"]})}),(0,n.jsxs)(b.v2,{placement:"top",matchWidth:!0,children:[(0,n.jsx)(b.j2,{as:m.zx,width:"100%",bg:"black",rightIcon:(0,n.jsx)(w.$,{color:"white"}),color:"white",borderRadius:30,fontSize:"xs",children:null===e.selectedRoute?"\u9078\u64c7\u8def\u7dda":null===(i=e.journeys[null===e||void 0===e?void 0:e.selectedRoute])||void 0===i?void 0:i.title}),(0,n.jsx)(b.qy,{p:0,minW:"0",maxH:"200px",overflowY:"scroll",w:"100%",children:null===(l=e.journeys)||void 0===l?void 0:l.map((function(t,i){return 0===i||e.journeys[i].group!==e.journeys[i-1].group?(0,n.jsxs)(o.xu,{children:[(0,n.jsx)(o.xv,{fontSize:"0.8em",fontWeight:"bold",bg:"#343434",py:"4px",paddingLeft:"0.75rem",textColor:"white",cursor:"default",_hover:{backgroundColor:"#343434"},children:x.uc[t.group]}),(0,n.jsx)(b.sN,{fontSize:"xs",itemID:t.id.toString(),onClick:e.switchRoute,backgroundColor:t.group%2==0?"white":"#d9d9d9",children:t.title})]}):(0,n.jsx)(b.sN,{fontSize:"xs",itemID:t.id.toString(),onClick:e.switchRoute,backgroundColor:t.group%2==0?"white":"#d9d9d9",children:t.title})}))})]})]})}var C=i(2923);function S(e){return(0,n.jsx)(o.kC,{bottom:"5%",display:"inline",textAlign:"center",position:"absolute",left:"12%",visibility:0==e.selectedPoint?"hidden":"visible",children:(0,n.jsx)(o.rU,{children:(0,n.jsx)(C.R,{w:5,h:5,onClick:function(){e.setPoint(e.selectedPoint-1),null!==e.selectedRoute&&e.setCenter(e.journeys[e.selectedRoute].points[e.selectedPoint-1].spot)}})})})}var R=i(5);function P(e){return(0,n.jsx)(o.kC,{bottom:"5%",display:"inline",textAlign:"center",position:"absolute",left:"47%",children:(0,n.jsx)(o.rU,{children:(0,n.jsx)(R.D,{w:4,h:4,onClick:function(){e.setRoute(null),e.setCenter({lat:22.25558,lng:114.13625}),e.setZoomValue(15),window.innerWidth>1750?(e.setCenter({lat:22.25558,lng:114.13625}),e.setZoomValue(15)):(e.setCenter({lat:22.2535,lng:114.13625}),e.setZoomValue(16))}})})})}var E=i(273);function z(e){return(0,n.jsx)(o.kC,{bottom:"5%",display:"inline",textAlign:"center",position:"absolute",right:"12%",visibility:e.journeys[null===e.selectedRoute?0:e.selectedRoute].points[e.journeys[null===e.selectedRoute?0:e.selectedRoute].points.length-1].id==e.selectedPoint?"hidden":"visible",children:(0,n.jsx)(o.rU,{children:(0,n.jsx)(E.m,{w:5,h:5,onClick:function(){e.setPoint(e.selectedPoint+1),null!==e.selectedRoute&&e.setCenter(e.journeys[e.selectedRoute].points[e.selectedPoint+1].spot)}})})})}function A(e){var t=e.selectedRoute;return(0,n.jsxs)(o.xu,{zIndex:0,position:"absolute",right:0,bottom:0,width:"80vw",height:"17vh",backgroundColor:"#FFEB51",display:null==t?"box":"none",textAlign:"right",children:[(0,n.jsxs)(o.xu,{width:"35vw",height:"100%",display:"inline-block",verticalAlign:"top",textAlign:"left",children:[(0,n.jsx)(o.xv,{fontSize:["12px","12px","12px","12px","7px","20px"],children:"\xa9 All rights reserved unless otherwise specified. No portion of this website can be reproduced or transmitted in any form without prior permission."}),(0,n.jsx)(o.xv,{fontSize:["12px","12px","12px","12px","7px","20px"],children:"\u9664\u6a19\u660e\u90e8\u5206\u5916\uff0c\u7248\u6b0a\u6240\u6709\u3002\u9664\u53d6\u5f97\u4e8b\u5148\u8a31\u53ef\uff0c\u4e0d\u5f97\u7ffb\u5370\u672c\u7db2\u9801\u4e4b\u4efb\u4f55\u90e8\u5206\u6216\u4f5c\u4efb\u4f55\u5f62\u5f0f\u4e4b\u8f49\u8f09\u3002"})]}),(0,n.jsxs)(o.xu,{width:"30vw",height:"100%",display:"inline-block",verticalAlign:"top",children:[(0,n.jsx)(o.xu,{width:"50%",height:"50%",display:"inline-block",children:(0,n.jsx)(h.Ee,{src:"P2_HOME/HEADER/HKU Landscape_LOGO.svg",boxSize:"100%",objectFit:"contain"})}),(0,n.jsx)(o.xu,{width:"50%",height:"50%",display:"inline-block",children:(0,n.jsx)(h.Ee,{src:"P2_HOME/HEADER/Wah Fu research group logo.png",boxSize:"100%",objectFit:"contain"})}),(0,n.jsx)(o.xu,{width:"50%",height:"50%",display:"inline-block",children:(0,n.jsx)(h.Ee,{src:"P2_HOME/HEADER/HKU-Sociology_LOGO.png",boxSize:"90%",objectFit:"contain"})}),(0,n.jsx)(o.xu,{width:"50%",height:"50%",display:"inline-block",children:(0,n.jsx)(h.Ee,{src:"P2_HOME/HEADER/HKU_KE_LOGO.svg",boxSize:"95%",objectFit:"contain",objectPosition:"left top"})})]})]})}function _(e){var t=e.routeId,i=(0,j.Ji)({id:"google-map-script",googleMapsApiKey:"AIzaSyC9haK1S8KKj7svug6Ft9cOSu_O9y7rcTw"}).isLoaded,s=(0,l.useState)({lat:22.25558,lng:114.13625}),r=s[0],d=s[1],c=(0,l.useMemo)((function(){return{mapId:"13e684ef12037fd5",disableDefaultUI:!0}}),[]),u=(0,x.Ge)().journeys,a=(0,l.useState)(null),g=a[0],p=a[1],b=(0,l.useState)(0),m=b[0],w=b[1],y=(0,l.useState)(15),C=y[0],R=y[1],E=function(){var e=(0,v.Z)((function(e){var t;return(0,f.__generator)(this,(function(i){return t=Number(e.target.getAttribute("itemid")),p(t),w(0),d(u[t].points[0].spot),R(18),[2]}))}));return function(t){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){if(t){var e=parseInt(t,10);p(e),w(0),d(u[e].points[0].spot),R(18)}window.innerWidth>1750&&(d({lat:22.2535,lng:114.13625}),R(16))}),[]);return i?(0,n.jsxs)(o.rj,{h:"100vh",w:"100vw",zIndex:1,position:"relative",overflowY:"hidden",children:[(0,n.jsxs)(j.b6,{mapContainerStyle:{width:"100%",height:"100%"},center:r,zoom:C,options:c,children:[(0,n.jsx)(o.xu,{position:"relative",children:u.map((function(e,t){if(e.id===g)return e.points.map((function(e){var t={lat:e.spot.lat,lng:e.spot.lng};return(0,n.jsx)(j.Jx,{position:t,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:"yellow",fillOpacity:10,scale:e.id===m?10:5,strokeColor:"yellow",strokeWeight:.5},label:e.id===m?(m+1).toString():"",onClick:function(){w(e.id)}})}))}))}),u.map((function(e){if(e.id===g){var t=e.path;return(0,n.jsx)(j.aH,{path:t,options:{strokeColor:"yellow",strokeOpacity:.8,strokeWeight:2,clickable:!1,draggable:!1,editable:!1,visible:!0,zIndex:4}})}})),(0,n.jsx)(j.Jx,{position:{lat:22.251708,lng:114.1341985},icon:{url:"P2_HOME/MAP/\u83ef\u5bcc\u90a8.svg",fillColor:"black",strokeColor:"black",scaledSize:window.innerWidth>1750?new google.maps.Size(190,190):new google.maps.Size(130,130),anchor:new google.maps.Point(30,80)},options:{clickable:!1,draggable:!1,visible:null===g}})]}),null===g?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(o.kC,{width:"30vw",height:"90%",bg:"white",position:"absolute",top:5,right:5,borderRadius:3,textAlign:"left",zIndex:"5",children:(0,n.jsxs)(o.kC,{display:"inline-block",px:6,position:"relative",textAlign:"center",width:"100%",children:[(0,n.jsxs)(o.kC,{alignItems:"flex-end",children:[(0,n.jsx)(o.xv,{fontSize:40,fontWeight:"bold",verticalAlign:"text-bottom",children:u[g].points[m].id+1}),(0,n.jsx)(o.xv,{py:2,children:u[g].points[m].title})]}),(0,n.jsx)(o.xu,{height:"40vh",margin:"0 auto",alignSelf:"center",children:(0,n.jsx)(h.Ee,{margin:"auto",boxSize:"100%",objectFit:"contain",src:u[g].points[m].imgPath})}),(0,n.jsx)(o.kC,{children:(0,n.jsx)(o.xv,{marginTop:"4vh",children:u[g].points[m].description})}),(0,n.jsx)(z,{journeys:u,selectedPoint:m,setPoint:w,selectedRoute:g,setCenter:d}),(0,n.jsx)(P,{journeys:u,selectedPoint:m,setRoute:p,selectedRoute:g,setCenter:d,setZoomValue:R}),(0,n.jsx)(S,{journeys:u,selectedPoint:m,setPoint:w,selectedRoute:g,setCenter:d})]})}),(0,n.jsx)(k,{journeys:u,switchRoute:E,selectedRoute:g}),(0,n.jsx)(A,{selectedRoute:g})]}):(0,n.jsx)(n.Fragment,{})}var I=function(e){e.Component;var t=(0,l.useState)("MAP"),i=t[0],r=t[1],u=(0,s.useRouter)().query,a=u.profileState,h=u.routeId;return(0,l.useEffect)((function(){a&&(r("PROFILE"),console.log("routeId",h))}),[]),(0,n.jsxs)(o.kC,{children:[(0,n.jsx)(d,{activeMode:i,setActiveMode:r}),(0,n.jsx)(c.Z,{isProfile:!1}),"MAP"==i?(0,n.jsx)(_,{routeId:h}):(0,n.jsx)(p,{})]})}}},function(e){e.O(0,[255,850,520,794,459,774,888,179],(function(){return t=8312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);